<script src="poll.js"></script>

<script>
    (async function run() {
        let endTimeMs = Date.now() + (2 * 60 * 1000); // run for 2 minutes
        console.log('BEGIN', (new Date()).toISOString());

        await poll(
            async function () {
                let currTime = new Date();
                console.log('poll', currTime.toISOString());

                return (currTime.getTime() >= endTimeMs);
            }
        );

        console.log('CLOSE', (new Date()).toISOString());
    })();
</script>
